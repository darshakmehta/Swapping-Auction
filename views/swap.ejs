<!DOCTYPE html>
<html lang="en">
  <head>

    <title>Swapping Auction</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    
    <!-- CSS Reset -->
    <!-- <link rel="stylesheet" href="styles/css-reset.css"> -->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/resources/styles.css">
  </head>

  <body>

  	<% include partials/header.ejs %>
	<% include partials/user-navigation.ejs %>
	<div class="content-container container-fluid">
		<% include partials/site-navigation.ejs %>	

		<!-- Main Content Area -->
		<section class="col-lg-9 my-offer-styling">
			<div class="content">
				<!--  Breadcrumb -->
				<h3 class="inline-header">Home > Swap Items</h3> <!-- Swap ___ Category Name ___ -->
				<h2 class="inline-header-swap"> Swap this item </h2>
				<!-- Interested item to swap -->
				<article>
					<div class="text-style2"> Category: <%= item.category %></div>
					<div class="text-style2"> Average Rating: <%= item.rating %></div>
					<div class="page-info">
						<img class="item-img-style float-left" src = "<%= item.image_url %>" alt = "item-image"/>
					</div>
					<div class="float-left">
						<div class="item-name"> <%= item.name %> </div>
						<!-- <div class="item-author"> by Peter Jackson </div> -->
						<div class="item-content-swap"> <b> <%= item.description %> </b></div>
					</div>
					<div class ="swap-options-header clear-float ">
						<% if(flag === false) {%>
							<h2> <%= message %> </h2>
						<%} else {%>
						<h2> Select an item from your available swaps </h2>
						<div class = "swap-options">
							<form action = "/confirmswap" method = "POST">
								<!-- List of available UserItems -->
								<ul>
									<input type = "hidden" name="swapUserId" value="<%= item.userId %>">
									<input type = "hidden" name="swapUserItemCode" value="<%= item.code %>"> 
									<input type = "hidden" name="userId" value="<%= availableList[0].userId %>">
									<% Object.keys(availableList).forEach((item) => {%>
										<li class="swap-options-list">
											<input type="radio" name ="userItemCode" value="<%= availableList[item].code %>"> <span class ="swap-options-item"><a href="/item?itemCode=<%= availableList[item].code %>"> <%= availableList[item].name %></a></span>
										</li>
									<%});%>
								</ul>
								<!-- Swap your available item for interested item -->
								<input class="btn-style-mySwap a-hover-color" type="submit" value="Confirm Swap">
							</form>
						</div>
						<%}%>
					</div>
					
				</article>
			</div>
		</section>
		</div> <!-- Row ends -->
	</div> <!-- Container ends -->

	<% include partials/footer.ejs %>

	<!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  </body>
</html>